{{ header }}{{ column_left }}
<div id="content">
    <div class="page-header">
        <div class="container-fluid">
            <div class="pull-right">
                <button type="submit" form="form-banner" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
            </div>
            <h1>{{ heading_title }}</h1>
            <ul class="breadcrumb">
                {% for breadcrumb in breadcrumbs %}
                    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>
        <div class="container-fluid">
            {% if error_warning %}
                <div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                </div>
            {% endif %}
            {% if success %}
                <div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> {{ success }}
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                </div>
            {% endif %}
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_form }}</h3>
                </div>
                <div class="panel-body">
                    <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-banner" class="form-horizontal">
                        <ul class="nav nav-tabs" id="countries">
                            {% for country in countries %}
                                <li><a href="#country{{ country.country_id }}" data-toggle="tab"><img src="language/{{ country.code }}/{{ country.code }}.png" title="{{ country.name }}"/> {{ country.name }}</a></li>
                            {% endfor %}
                        </ul>
                        <div class="tab-content">
                            {% set image_row = 0 %}
                            {% for country in countries %}
                                <div class="tab-pane" id="country{{ country.country_id }}">
                                    <table id="images{{ country.country_id }}" class="table table-striped table-bordered table-hover">
                                        <thead>
                                        <tr>
                                            <td class="text-left">{{ column_name }}</td>
                                            <td class="text-center">{{ column_link }}</td>
                                            <td class="text-right">{{ column_sort_order }}</td>
                                            <td class="text-right">{{ column_action }}</td>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% if menus[country.country_id] %}
                                            {% for item in menus[country.country_id] %}
                                                <tr id="image-row{{ image_row }}">
                                                    <td class="text-left">
                                                        <input type="text" name="menu[{{ country.country_id }}][{{ image_row }}][title]"
                                                               value="{{ item.title }}" placeholder="{{ entry_title }}" class="form-control"/>
                                                    </td>
                                                    <td class="text-left" style="width: 30%;">
                                                        <input type="text" name="menu[{{ country.country_id }}][{{ image_row }}][link]"
                                                               value="{{ item.link }}" placeholder="{{ entry_link }}" class="form-control"/>
                                                    </td>
                                                    <td class="text-left" style="width: 20%;">
                                                        <input type="text" name="menu[{{ country.country_id }}][{{ image_row }}][sort_order]" value="{{ item.sort_order }}" placeholder="{{ entry_sort_order }}" class="form-control"/>
                                                    </td>
                                                    <td class="text-left">
                                                        <button type="button" onclick="$('#image-row{{ image_row }}, .tooltip').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger">
                                                            <i class="fa fa-minus-circle"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                                {% set image_row = image_row + 1 %}
                                            {% endfor %}
                                        {% endif %}
                                        </tbody>
                                        <tfoot>
                                        <tr>
                                            <td colspan="3"></td>
                                            <td class="text-left"><button type="button" onclick="addImage('{{ country.country_id }}');" data-toggle="tooltip" title="{{ button_banner_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            {% endfor %}
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
<script type="text/javascript">
    var image_row = {{ image_row }};

    function addImage(country_id)
    {
        html = '<tr id="image-row' + image_row + '">';
        html += '  <td class="text-left"><input type="text" name="menu[' + country_id + '][' + image_row + '][title]" value="" placeholder="{{ entry_title }}" class="form-control" /></td>';
        html += '  <td class="text-left" style="width: 30%;"><input type="text" name="menu[' + country_id + '][' + image_row + '][link]" value="" placeholder="{{ entry_link }}" class="form-control" /></td>';
        html += '  <td class="text-right" style="width: 20%;"><input type="text" name="menu[' + country_id + '][' + image_row + '][sort_order]" value="" placeholder="{{ entry_sort_order }}" class="form-control" /></td>';
        html += '  <td class="text-left"><button type="button" onclick="$(\'#image-row' + image_row + ', .tooltip\').remove();" data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
        html += '</tr>';

        $('#images' + country_id + ' tbody').append(html);

        image_row++;
    }

    $('#countries a:first').tab('show');
</script>
{{ footer }}
